biolib_version: 2

modules:
    main:
        image: 'local-docker://epibuilder2:latest'
        command: java -jar epibuilder-2.jar
        working_directory: /
        input_files:
            - COPY / /
        output_files:
            - COPY /epibuilder-results/ /
        source_files: [ ]

citation:
   entry_type: 'article'
   author: 'Moreira, Renato Simões, Vilmar Benetti Filho, Nathália Anderson Calomeno, Glauber Wagner, and Luiz Claudio Miletti'
   title: 'EpiBuilder: A Tool for Assembling, Searching, and Classifying B-Cell Epitopes'
   journal: 'Bioinform Biol Insights'
   year: '2022'
   volume: '16'
   doi: '10.1177/11779322221095221'

output_type: markdown
    
arguments:
   -
      key: --input
      description: 'Input file'
      default_value: 'input.fasta'
      type: file
      required: true
   -
      key: --format
      description: 'Input type'
      default_value: 'fasta'
      type: radio
      required: true
      options:
         'CSV (Generated by BepiPred-3 - https://biolib.com/DTU/BepiPred-3/)': 'csv'
         'FASTA': 'fasta'
   -
      key: --threshold
      description: 'BepiPred threshold (default for BepiPred-3.0 = 0.1512)'
      default_value: '0.1512'
      type: text
      required: true
   -   
      key: --min-length
      description: 'Minimum epitope length'
      default_value: '10'
      type: text
      required: true
   -
      key: --max-length
      description: 'Maximum epitope length'
      default_value: '30'
      type: text
      required: true
   -   
      key: --output
      description: 'The common base name for the initial output files'
      default_value: 'epibuilder-results'
      type: hidden
      required: false
   -   
      key: --search
      description: 'Do you want to perform an epitopes search in the given proteome(s).'
      default_value: 'none'
      type: radio
      required: false
      options:
         'BlastP search': 'blast'
         'Don''t search': 'none'   
      sub_arguments:
         'blast':
             -
               key: --ident
               description: 'Minimum identity cutoff'
               default_value: '90'
               type: text
               required: false
             - 
               key: --cover
               description: 'Minimum cover cutoff'
               default_value: '90'
               type: text
               required: false
             -
               key: --word-size
               description: '-word_size'
               default_value: '4'
               type: text
               required: false
             -   
                key: --proteome1
                description: 'Proteome 1 file'               
                type: file
                required: false
             -   
                key: --proteome1-alias
                description: 'Proteome 1 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome2
                description: 'Proteome 2 file'
                type: file
                required: false
             -   
                key: --proteome2-alias
                description: 'Proteome 2 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome3
                description: 'Proteome 3 file'

                type: file
                required: false
             -   
                key: --proteome3-alias
                description: 'Proteome 3 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome4
                description: 'Proteome 4 file'
                type: file
                required: false
             -   
                key: --proteome4-alias
                description: 'Proteome 4 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome5
                description: 'Proteome 5 file'
                type: file
                required: false
             -   
                key: --proteome5-alias
                description: 'Proteome 5 alias - appears in the report file' 
                type: text
                required: false
             -   
                key: --proteome6
                description: 'Proteome 6 file'
                type: file
                required: false
             -   
                key: --proteome6-alias
                description: 'Proteome 6 alias - appears in the report file' 
                type: text
                required: false
                