biolib_version: 2

modules:
    main:
        image: 'dockerhub://clearlinux/openjdk:latest'
        command: java -cp "epibuilder1.jar" BiolibMain
        working_directory: /home/biolib/
        input_files:
            - COPY / /home/biolib/
        output_files:
            - COPY /home/biolib/ /
        source_files:
            - COPY / /home/biolib/
output_type: markdown
arguments:
   -
      key: --input
      description: 'Input CSV file (Generated by BepiPred-3 - https://biolib.com/DTU/BepiPred-3/)'
      default_value: 'input.csv'
      type: file
      required: true
   -
      key: --threshold
      description: 'BepiPred threshold (default for BepiPred-3.0 = 0.1512)'
      default_value: '0.1512'
      type: text
      required: true
   -   
      key: --min-length
      description: 'Minimum epitope length'
      default_value: '10'
      type: text
      required: true
   -
      key: --max-length
      description: 'Maximum epitope length'
      default_value: '30'
      type: text
      required: true
   -   
      key: --features_biolib
      description: 'Select the features (peptides chemical properties). The threshold default is the average.'
      key_value_separator: ','
      default_value: 'emini,kolaskar,chou,karplus,parker'
      type: multiselect
      options:
         'Emini': 'emini'
         'Kolaskar': 'kolaskar'
         'Chou Fosman': 'chou'
         'Karplus Schulz': 'karplus'
         'Parker': 'parker'
      required: false
   -   
      key: --basename
      description: 'The common base name for the initial output files'
      default_value: 'run'
      type: text
      required: false
   -
      key: --system
      description: 'Operational system'
      default_value: 'linux'
      type: hidden
   -   
      key: --search
      description: 'Do you want to perform an epitopes search in the given proteome(s).'
      default_value: 'none'
      type: radio
      required: false
      options:
         'Direct search (fast)': 'direct'
         'Direct + Blastp search': 'direct_blast'
         'Don''t search': 'none'   
      sub_arguments:
         'direct':
             -   
                key: --proteome1
                description: 'Proteome 1 file'
                type: file
                required: false
             -   
                key: --proteome1-alias
                description: 'Proteome 1 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome2
                description: 'Proteome 2 file'
                type: file
                required: false
             -   
                key: --proteome2-alias
                description: 'Proteome 2 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome3
                description: 'Proteome 3 file'
                type: file
                required: false
             -   
                key: --proteome3-alias
                description: 'Proteome 3 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome4
                description: 'Proteome 4 file'
                type: file
                required: false
             -   
                key: --proteome4-alias
                description: 'Proteome 4 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome5
                description: 'Proteome 5 file'
                type: file
                required: false
             -   
                key: --proteome5-alias
                description: 'Proteome 5 alias - appears in the report file' 
                type: text
                required: false

         'direct_blast':
             -
               key: --task
               description: '-task'
               default_value: 'blastp-short'
               type: radio
               options:
                   'blastp-short': 'blastp-short'
                   'blastp': 'blastp'
                   'blastp-fast': 'blastp-fast'
               required: true
             -
               key: --ident
               description: 'Minimum identity cutoff'
               default_value: '90'
               type: text
               required: false
             - 
               key: --cover
               description: 'Minimum cover cutoff'
               default_value: '90'
               type: text
               required: false
             -
               key: --word-size
               description: '-word_size'
               default_value: '4'
               type: text
               required: false
             -   
                key: --proteome1
                description: 'Proteome 1 file'               
                type: file
                required: false
             -   
                key: --proteome1-alias
                description: 'Proteome 1 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome2
                description: 'Proteome 2 file'
                type: file
                required: false
             -   
                key: --proteome2-alias
                description: 'Proteome 2 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome3
                description: 'Proteome 3 file'

                type: file
                required: false
             -   
                key: --proteome3-alias
                description: 'Proteome 3 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome4
                description: 'Proteome 4 file'
                type: file
                required: false
             -   
                key: --proteome4-alias
                description: 'Proteome 4 alias - appears in the report file'
                type: text
                required: false
             -   
                key: --proteome5
                description: 'Proteome 5 file'
                type: file
                required: false
             -   
                key: --proteome5-alias
                description: 'Proteome 5 alias - appears in the report file' 
                type: text
                required: false
                